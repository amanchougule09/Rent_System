{% extends "rent/base_owner.html" %}
{% block content %}

<div class="dashboard-grid">
    <h1 class="page-title">Owner Dashboard</h1>
    
    <div class="stats-container">
        <div class="stat-card">
            <p class="stat-label">Total Rent Collected</p>
            <h3>₹{{ total_rent_collected }}</h3>
            <span class="status-pill green">Rent Collected</span>
        </div>
        <div class="stat-card">
            <p class="stat-label">Occupancy Rate</p>
            <h3>{{ occupancy_rate }}%</h3>
            <div class="progress-bar"><div class="progress" style="width: {{ occupancy_rate }}%"></div></div>
        </div>
        <div class="stat-card">
            <p class="stat-label">Pending Payments</p>
            <h3>{{ unpaid }} Tenants</h3>
            <span class="status-pill red">For {{ unpaid }} Tenants</span>
        </div>
        <div class="stat-card">
            <p class="stat-label">Upcoming Rent Due</p>
            <h3>₹{{ upcoming_rent }}</h3>
            <span class="status-pill blue">Available Now</span>
        </div>
    </div>

    <div class="bottom-sections">
        <div class="activity-section">
            <h2 class="section-subtitle">Recent Tenants</h2>
            <div class="activity-table-card">
                <table>
                    <thead>
                        <tr>
                            <th>Tenant Name</th>
                            <th>Payment Status</th>
                            <th>Rent Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tenant in recent_tenants %}
                        <tr>
                            <td>{{ tenant.name }} <br><small>Rent: ₹{{ tenant.amount }}</small></td>
                            <td>
                                {% if tenant.paid %}
                                    <span class="status-pill green">Paid</span>
                                {% else %}
                                    <span class="status-pill red">Unpaid</span>
                                {% endif %}
                            </td>
                            <td><a href="{% url 'owners:tenant_detail' tenant.id %}" style="color: #1a73e8; text-decoration: none;">View</a></td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="3" style="text-align: center;">No tenants yet</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="actions-section">
            <h2 class="section-subtitle">Quick Action</h2>
            <div class="action-card">
                <a href="{% url 'owners:add_tenant' %}" class="action-item">Add Tenant</a>
                <a href="{% url 'owners:add_room' %}" class="action-item">Add Room</a>
                <a href="{% url 'owners:management' %}" class="action-item">View Reports</a>
            </div>
        </div>
    </div>
</div>

{% endblock %}