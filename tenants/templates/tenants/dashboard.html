{% extends "rent/base_tenant.html" %}
{% load static %}

{% block title %}My Dashboard | Rental Manago{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Welcome back, {{ tenant.name }}!</h1>
    <p>Here is the current status of your residency.</p>
</div>

<div class="tenant-grid">
    <div class="tenant-main">
        <div class="card-style status-hero {% if tenant.paid %}status-paid{% else %}status-pending{% endif %}">
            <div class="status-content">
                <div class="status-icon">
                    {% if tenant.paid %}
                        <i class="fas fa-check-circle"></i>
                    {% else %}
                        <i class="fas fa-clock"></i>
                    {% endif %}
                </div>
                <div class="status-text-group">
                    <h3>Rent for this month is {{ tenant.paid|yesno:"Paid,Pending" }}</h3>
                    {% if tenant.paid %}
                        <p>Thank you! Your payment was recorded on {{ tenant.payment_date|date:"d M Y" }}.</p>
                    {% else %}
                        <p>Your rent of <strong>₹{{ tenant.amount }}</strong> is due soon.</p>
                    {% endif %}
                </div>
            </div>
            {% if not tenant.paid %}
                <div class="status-action">
                    <button class="btn-white">Pay Now</button>
                </div>
            {% endif %}
        </div>

        {% if tenant.is_overdue %}
        <div class="alert-banner">
            <i class="fas fa-exclamation-triangle"></i>
            <span>Your payment is past the due date. Please settle it to avoid late fees.</span>
        </div>
        {% endif %}

        <div class="card-style mt-20">
            <h3>Quick Actions</h3>
            <div class="quick-links-grid">
                <a href="#" class="action-tile">
                    <i class="fas fa-file-invoice"></i>
                    <span>Download Receipt</span>
                </a>
                <a href="#" class="action-tile">
                    <i class="fas fa-tools"></i>
                    <span>Request Repair</span>
                </a>
                <a href="#" class="action-tile">
                    <i class="fas fa-history"></i>
                    <span>Payment History</span>
                </a>
            </div>
        </div>
    </div>

    <div class="tenant-sidebar">
        <div class="card-style">
            <h3>Residency Details</h3>
            <div class="detail-list">
                <div class="detail-item">
                    <label>Assigned Room</label>
                    <p>{{ tenant.room_number|default:"Not Assigned" }}</p>
                </div>
                <div class="detail-item">
                    <label>Monthly Rent</label>
                    <p>₹{{ tenant.amount }}</p>
                </div>
                <div class="detail-item">
                    <label>Security Deposit</label>
                    <p>₹{{ tenant.security_deposit }}</p>
                </div>
                <div class="detail-item border-top">
                    <label>Next Due Date</label>
                    <p class="highlight-text">
                        {% if tenant.due_date %}
                            {{ tenant.due_date|date:"d M Y" }}
                        {% else %}
                            30-Day Cycle
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}