{% extends "rent/base_owner.html" %}
{% load static %}

{% block title %}Assign Tenant | Rental Manago{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Assign Tenant</h1>
    <p>Select an unassigned tenant to occupy <strong>Room {{ room.room_number }}</strong>.</p>
</div>

<div class="card-style form-container-centered small-width">
    <div class="selection-info">
        <div class="room-preview-mini">
            {% if room.image %}
                <img src="{{ room.image.url }}" alt="Room">
            {% else %}
                <img src="{% static 'rent/default_room.jpg' %}" alt="Room">
            {% endif %}
            <div>
                <h4>{{ room.title }}</h4>
                <p>â‚¹{{ room.rent_amount }} / month</p>
            </div>
        </div>
    </div>

    <form method="POST" class="modern-form">
        {% csrf_token %}

        <div class="form-group">
            <label>Available Tenants</label>
            <select name="tenant" required class="custom-select">
                <option value="" disabled selected>-- Choose a tenant --</option>
                {% for tenant in tenants %}
                    <option value="{{ tenant.id }}">
                        {{ tenant.name }} ({{ tenant.user.mobile }})
                    </option>
                {% endfor %}
            </select>
            {% if not tenants %}
                <p class="error-text">No unassigned tenants found. <a href="{% url 'owners:add_tenant' %}">Add one first?</a></p>
            {% endif %}
        </div>

        <div class="form-actions-full">
            <button type="submit" class="btn-primary btn-block" {% if not tenants %}disabled{% endif %}>
                Confirm Assignment
            </button>
            <a href="{% url 'owners:room_detail' room.id %}" class="btn-text">Cancel and Go Back</a>
        </div>
    </form>
</div>
{% endblock %}